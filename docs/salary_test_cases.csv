Test Case ID,Category,Test Case Description,Preconditions,Test Steps,Expected Result,Status
TC-SAL-001,Eligibility,User meets Stage 1 requirements,"User has 5+ direct members (each with $50+ investment), $100+ self deposit, 60+ team members",Navigate to Salary page and check eligibility,User sees "You are eligible" message with Apply button,
TC-SAL-002,Eligibility,User does not meet direct members requirement,"User has 3 direct members (each with $50+ investment), $100+ self deposit, 60+ team members",Navigate to Salary page and check eligibility,User sees eligibility requirements with direct members progress bar incomplete,
TC-SAL-003,Eligibility,User does not meet self deposit requirement,"User has 5+ direct members, $0 self deposit, 60+ team members",Navigate to Salary page and check eligibility,User sees eligibility requirements with self deposit progress bar incomplete,
TC-SAL-004,Eligibility,User does not meet team count requirement,"User has 5+ direct members, $100+ self deposit, 30 team members",Navigate to Salary page and check eligibility,User sees eligibility requirements with team count progress bar incomplete,
TC-SAL-005,Eligibility,Direct member has less than $50 investment,"User has 5 direct members but 2 have only $30 investment each",Navigate to Salary page and check eligibility,Only 3 direct members counted; user not eligible if requirement is 5,
TC-SAL-006,Application,Eligible user applies successfully,User meets all Stage 1 requirements,Click Apply button on Salary page,Application created with status 'active'; redirected to progress page,
TC-SAL-007,Application,User with existing active application tries to apply,User already has an active salary application,Navigate to Salary page,User sees progress tracking instead of Apply button,
TC-SAL-008,Application,Failed user re-applies after meeting requirements,"User has failed application, now meets Stage 1 requirements again",Navigate to Salary page and apply,New application created successfully,
TC-SAL-009,Growth Target,35% team growth calculation verified,User applies with 60 team members,Check current_target_team in application,"Target should be ceil(60 * 1.35) = 81 members",
TC-SAL-010,Growth Target,35% growth compounds monthly,"User passed month 1 with 81 team members, now in month 2",Check current_target_team after month 1 evaluation,"Target should be ceil(81 * 1.35) = 110 members",
TC-SAL-011,Growth Target,New direct members target is always 3,User applies to salary program,Check current_target_direct_new in application,Target should be 3 new direct members,
TC-SAL-012,Monthly Evaluation,User meets both growth targets,"User has 85 team members (target: 81), 4 new direct members (target: 3)",Run salary:evaluate command,"Evaluation passed, salary paid to user wallet",
TC-SAL-013,Monthly Evaluation,User meets team target only,"User has 85 team members (target: 81), 1 new direct member (target: 3)",Run salary:evaluate command,"Evaluation failed, application marked as failed",
TC-SAL-014,Monthly Evaluation,User meets direct target only,"User has 70 team members (target: 81), 5 new direct members (target: 3)",Run salary:evaluate command,"Evaluation failed, application marked as failed",
TC-SAL-015,Monthly Evaluation,User misses both targets,"User has 70 team members (target: 81), 1 new direct member (target: 3)",Run salary:evaluate command,"Evaluation failed, application marked as failed",
TC-SAL-016,Stage Progression,User qualifies for Stage 2 after passing Stage 1,"User passed Stage 1 evaluation, now meets Stage 2 requirements",Run salary:evaluate command,User promoted to Stage 2; next month uses Stage 2 salary amount,
TC-SAL-017,Stage Progression,User cannot skip stages,"User is at Stage 1, meets Stage 3 requirements",Run salary:evaluate command,User promoted to Stage 2 only (sequential progression enforced),
TC-SAL-018,Stage Progression,User at max stage stays at max stage,"User is at Stage 5, passes evaluation",Run salary:evaluate command,User remains at Stage 5; continues receiving Stage 5 salary,
TC-SAL-019,Idempotency,Duplicate evaluation prevention,User's application already evaluated for current period,Run salary:evaluate command twice,"Second run skips already-evaluated applications, no duplicate payments",
TC-SAL-020,Idempotency,Same period check in evaluateMonthEnd,"Application with period_end = 2026-01-31, evaluation exists for that period",Call evaluateMonthEnd directly,Exception thrown: "Evaluation already exists for this period",
TC-SAL-021,Payment,Salary amount matches stage,"User at Stage 1 ($200), passes evaluation",Check transaction after evaluation,"Transaction created with type 'salary', amount $200",
TC-SAL-022,Payment,User wallet balance increases,"User has $50 balance, Stage 1 salary is $200",User passes evaluation,User balance becomes $250,
TC-SAL-023,Notification,Payment notification sent,User passes monthly evaluation,Check user notifications,User receives "Salary Payment Received" notification,
TC-SAL-024,Notification,Failure notification sent,User fails monthly evaluation,Check user notifications,User receives "Monthly Salary Target Missed" notification,
TC-SAL-025,Notification,Eligibility notification sent,User becomes eligible for salary program,Run salary:notify-eligible command,User receives eligibility notification,
TC-SAL-026,Admin,Admin views applications list,Admin with salary.view permission,Navigate to Admin > Salary > Applications,List of all applications displayed with status filters,
TC-SAL-027,Admin,Admin views evaluations history,Admin with salary.view permission,Navigate to Admin > Salary > Evaluations,List of all monthly evaluations with pass/fail status,
TC-SAL-028,Admin,Admin triggers manual evaluation,Admin with salary.manage permission,Click Run Evaluation button in admin,Evaluations processed; results displayed,
TC-SAL-029,Admin,Admin views user progress,Admin with salary.view permission,Click View Progress for specific user,User's current progress and evaluation history shown,
TC-SAL-030,Console,Dry run mode works correctly,Applications due for evaluation exist,Run: php artisan salary:evaluate --dry-run,"Shows what would happen, but no evaluations created or payments made",
TC-SAL-031,Console,Verbose output in evaluation command,Applications due for evaluation exist,Run: php artisan salary:evaluate -v,Detailed output for each application processed,
TC-SAL-032,Team Counting,All levels included in team count,"User has 10 L1, 20 L2, 30 L3, 40 L4 referrals (all with $50+ investment)",Check team count in eligibility,Team count should be 100 (all levels combined),
TC-SAL-033,Team Counting,Referrals with less than $50 excluded,"User has 50 referrals, but 10 have less than $50 investment",Check team count in eligibility,Team count should be 40 (only qualified referrals),
TC-SAL-034,Period Management,Period start and end dates correct,User applies on January 15,Check application dates,"period_start = Jan 15, period_end = Feb 14 (30 days)",
TC-SAL-035,Period Management,Next period set after successful evaluation,User passes January evaluation,Check updated application dates,New period_start and period_end set for next 30 days,
TC-SAL-036,UI,Progress page shows correct percentages,"User has 70 team members (target: 81), 2 new direct members (target: 3)",View progress page,"Team progress: 86%, Direct progress: 67%",
TC-SAL-037,UI,Days remaining countdown accurate,User's period ends in 5 days,View progress page,Shows "5 days remaining",
TC-SAL-038,UI,Evaluation history displayed,User has 3 completed months,View progress page,All 3 evaluations shown with pass/fail status and amounts,
TC-SAL-039,RBAC,User without permission denied access,Non-admin user,Try to access admin salary routes,403 Forbidden response,
TC-SAL-040,RBAC,Admin with salary.view can view but not manage,Admin with only salary.view permission,Try to trigger manual evaluation,Action denied; view-only access works,
